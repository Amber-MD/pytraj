os: Windows Server 2012

# We need printf exponents to have 2 digits like the C standard says,
# or tests will fail. Set environment variable for mingw-w64:
# https://github.com/Alexpux/mingw-w64/blob/master/mingw-w64-crt/stdio/mingw_pformat.c#L223
environment:
  matrix:
  - PRINTF_EXPONENT_DIGITS: "2"

install:
  - set HOME=.
  - set MSYSTEM=MINGW64
  - set PATH=C:/msys64/usr/bin;C:/msys64/mingw64/bin;%PATH%
  - "sh -lc \"pacman -S --noconfirm --needed
      mingw-w64-x86_64-openblas
      mingw-w64-x86_64-arpack
      mingw-w64-x86_64-gcc
      mingw-w64-x86_64-gcc-fortran
      mingw-w64-x86_64-ncurses
      mingw-w64-x86_64-readline
      diffutils
    \""
  - "sh -lc \"
       curl -fsS https://ci.appveyor.com/api/buildjobs/oseo37t05ewnukia/artifacts/cpptraj-5918240.zip
  \""
  - 7z x cpptraj-5918240.zip -o$APPVEYOR_BUILD_FOLDER > /dev/null

build_script:
  - python setup.py build --disable-openmp
  - python setup.py install
